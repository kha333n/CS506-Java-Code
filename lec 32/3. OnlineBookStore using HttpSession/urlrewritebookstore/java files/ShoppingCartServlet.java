import java.io.*;import java.net.*;import javax.servlet.*;import javax.servlet.http.*;public class ShoppingCartServlet extends HttpServlet {	// Handles the HTTP GET method.	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {		processRequest(request, response);	}	// Handles the HTTP <code>POST</code> method.	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {		processRequest(request, response);	}	// called from both doGet() & doPost()	protected void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {		response.setContentType("text/html;charset=UTF-8");		HttpSession session = request.getSession(true);		PrintWriter out = response.getWriter();		out.println("<html>");		out.println("<head>");		out.println("<title>Shopping Cart Example</title>");		out.println("</head>");		out.println("<body>");		out.println("<h1>Online Book Store</h1>");		// First URL built using query string, representing first book		String firstURL = "shoppingcart?book=first";		// Second URL built using query string, representing second book		// Note that parameter name is still book, so that later we need		// to read only this parameter		String secondURL = "shoppingcart?book=second";			// Encoding URLs		String eURL1 = response.encodeURL( firstURL );		String eURL2 = response.encodeURL( secondURL );		out.println("<h3><a href=" + eURL1 + ">" +		" java core servlets </a> </h3>" +		"<br>"+		"<h3><a href=" + eURL2 + ">" +		" java How to Program </a> </h3>");		//retrieving params that are emebded in URLs		String fBook = request.getParameter("firstCB");		String sBook = request.getParameter("secondCB");		out.println("<br/>");		out.println("<h1>You have selected following books</h1>");		out.println("<br/>");			//retrieving param that is embedded into URL		String book = request.getParameter("book");		if (book != null){			// if firstURL, value of first hyperlink is clicked			// then storing the book into session object against fBook						if (book.equals("first")){				session.setAttribute("fBook", "java core servlets");			}			// if secondURL, value of second hyperlink is clicked			// then storing the book into session object against sBook			else if(book.equals("second")){				session.setAttribute("sBook", "java how to program");			}		}//outer if ends		// used to display the books currently stored in		// the HttpSession object i.e. session		printSessionInfo(out, session);		out.println("</body>");		out.println("</html>");		out.close();	} // end processRequest()	// used to display values stored in HttpSession object	public void printSessionInfo(PrintWriter out, HttpSession session) {		String title = "";		// reading value against key fBook from session,		// if exist displays it		title= (String)session.getAttribute("fBook");		if (title != null){			out.println("<h3> "+ title +"</h3>");		}		// reading value against key sBook from session,		// if exist displays it		title= (String)session.getAttribute("sBook");		if (title != null){			out.println("<h3> "+ title +"</h3>");		}	} // end printSessionInfo} // end ShoppingCartServlet